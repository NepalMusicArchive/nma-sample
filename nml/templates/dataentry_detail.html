{% extends 'dataentry_header.html' %}
{% set active_page = "collections" %}

{% block content %}


<div class="row">

  <div class="rounded">

    <div class="row">
      <div class="col-7">

        <p>
        <div class="form-group row linkfnt">
          <span class="card-text fs-6">
            <strong>Inscriptions:</strong>
            <div class="shadow p-3 mb-4 bg-body rounded fs-6 class=" overflow-auto">
              {%if get_detail.inscriptions%}
              {% for line in get_detail.inscriptions.splitlines() %}
              <p class="linkfnt">{{ line }}</p>
              {% endfor %}
              {%endif%}
            </div>
          </span>

        </div>
        </p>
        <p>
        <div class="form-group row linkfnt">
          <span class="card-text fs-6">
            <strong>Notes:</strong>
            <div class="shadow p-3 mb-5 bg-body rounded fs-6  class=" overflow-auto">
              {%if get_detail.notes%}
              {% for line in get_detail.notes.splitlines() %}
              <p class="lh-base linkfnt" ">{{ line }}</p>
                {% endfor %}
                {%endif%}
                </div>
              </span>
            </div>
    
  
        <p>
          <div class=" form-group row linkfnt">

                <strong>Keywords: </strong>
                </br>
                {% if get_detail.keywords %}
              <div class="shadow-none p-3 mb-5 bg-light rounded linkfnt">
                {% set list1 = get_detail.keywords.split(',') %}

                {% for item in list1 %}
                <span class="badge rounded-pill text-bg-warning linkfnt" style="padding:3pt">{{item |lower }}</span>
                {% endfor %}

              </div>
              {%endif%}

            </div>
            </p>


        </div>
        <div class="col-5 container text-center linkfnt">
          <!-- side content -->
          <span class="float-center d-inline p-1 text-bg-dark user-select-all" linkfnt">{{get_detail.tagname}}</span>

          {% if get_detail.image %}

          <img src="{{ url_for('static',filename='uploads/'+ get_detail.image) }}" width="200"
            class="rounded mx-auto d-block">

          {%endif%}

          <br>
          
          {%if get_detail.audio_file and audio_file%}
          Preview: </br>
  
          <audio controls>
            <source src="{{ audio_file }}" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>

          {%endif%}
          <br>
          <div class="container text-start float-start">
            <h5 class="linkfnt">

              <span class=" col-4">
                {%if get_detail.collector.collector%}
                Contributor: <strong class="user-select-all">{{get_detail.collector.collector | title}}</strong><br>
                {%endif%}
              </span>

              <span class=" col-4">
                {% if get_detail.collector.collectionid%}
                Collection ID: <span class="user-select-all">{{get_detail.collector.collectionid}}</span> <br>
                {%endif%}
              </span>

              <span class=" col-4">
                {% if get_detail.collection_title%}
                Title: <span class="user-select-all">{{get_detail.collection_title}}</span><br>
                {%endif%}
              </span>


              <span class=" col-4">
                {% if get_detail.language_id%}
                Language: <span class="user-select-all">{{get_detail.language.name}}</span><br>
                {%endif%}
              </span>

              <span class=" col-4">
                {% if get_detail.genre_id%}
                Genre : <span class="user-select-all">{{get_detail.genre.name}}</span><br>
                {%endif%}
              </span>

              <span class=" col-4">
                {% if get_detail.artist_id%}
                Artist: <span class="user-select-all">{{get_detail.artist_id}}</span> <br>
                {%endif%}
              </span>

              <span class=" col-4">
                {% if get_detail.company.name%}
                Record Company: <span class="user-select-all">{{get_detail.company.name}}</span> <br>
                {%endif%}
              </span>


              <span class=" col-4">
                {% if get_detail.media.name%}
                Media: <span class="user-select-all">{{get_detail.media.name}}</span>
                {%endif%}
              </span>
              <br>
              <span class=" col-4">
                {% if get_detail.formats.name%}
                Format: <span class="user-select-all">{{get_detail.formats.name}}</span>
                {%endif%}
              </span>
              <br>
              <span class=" col-4">
                
                {% if get_detail.location %}
                Location: <span class="user-select-all">{{get_detail.location}}</span>
                {%endif%}
                {% if get_detail.location1 %}
                Location: <span class="user-select-all">{{get_detail.location1}}</span>
                {%endif%}
              </span>
              <br>
              <span class=" col-7">
                {% if get_detail.release_year or get_detail.release_month %}
                Release (month/year): <span class="user-select-all"> {% if get_detail.release_month and
                  get_detail.release_month >= 1%}{{ get_detail.release_month }}{%endif%}/{% if get_detail.release_year
                  and get_detail.release_year >= 1%}{{get_detail.release_year}}{%endif%}</span>
                {%endif%}
              </span>



          </div>


        </div>
      </div>


      <p class="card-text linkfnt" style="float:right">
        <span class="linkfnt">
          Digitized By :
          {% if current_user.is_authenticated %} {% if get_detail.user.fullname%}<mark
            class=" linkfnt">{{get_detail.user.fullname}}</mark> {%endif%} {%else%} {% for names in
          get_detail.user.fullname.split() %}<mark class=" linkfnt">{{ names[0] |title}}</mark>{% endfor %} {%endif%} -
          {%if get_detail.date_added%} [<mark>{{get_detail.date_added.strftime("%-d %B %Y")}}</mark>] {%endif%}

        </span>
      </p>

    </div>

    <div class="d-flex flex-row mb-3">
      <div class="p-2 linkfnt">
        <p class="card-text" style="float: right">
            <a class="btn btn-outline-secondary btn-sm" href="{{request.referrer}}">Back</a>
          </p>
        {% if current_user.username==get_detail.user.username or current_user.is_admin == True %}
        <p>
        <div class="btn-group" role="group" aria-label="Basic mixed styles example">
          <a href="{{url_for('edit_coll',id=get_detail.id,pg=pg)}}">
            <button type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit Collection"
              class="btn btn-primary btn-sm linkfnt">
              Edit Collection
            </button></a>
          &nbsp; &nbsp; &nbsp; &nbsp;
            {% if current_user.username=='nirat' %}
           
          <a href="{{url_for('collection_delete',id=get_detail.id)}}"
            onclick="return confirm('Are you sure you want to delete this entry?')">
            <button type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Delete Collection"
              class="btn btn-outline-danger btn-sm linkfnt">
              Delete Collection
            </button></a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          
          
          {%endif%}
          {%endif%}
        </div>

      </div>
    </div>

  </div>


  {% endblock %}