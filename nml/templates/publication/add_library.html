{%extends 'layouts.html'%}
{% set active_page = "publication" %}
{% block content %}

<div class="row">


  <div class="col col-md-10 linkfnt">


    <table class="table table-striped table-light table-hover table-responsive  shadow-sm p-3 mb-5 bg-body rounded">
      <thead>
        <tr>
          <th scope="col"></th>
          <th scope="col">Name</th>
          <th scope="col">Address</th>
          <th scope="col">Contact</th>
          <th scope="col">Email</th>
          <th scope="col">Website</th>
          <th scope="col">Librarian</th>
          <th scope="col">Opening Hours</th>

          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for row in show_details %}
        <tr>
          <td>

            {% if row.image%}
            <img src="{{ url_for('static',filename='images/library/'+  row.image) }}" width="50em"
              class="rounded mx-auto d-block"> {%endif%}
          </td>
          <td><a href="{{url_for('libpublications',keys=row.id)}}">{% if row.name%}{{ row.name }}{%endif%}</a></td>
          <td>{% if row.address%}{{ row.address }}{%endif%}</td>
          <td>{% if row.contact%}{{ row.contact }}{%endif%}</td>
          <td>{% if row.email%}{{ row.email }}{%endif%}</td>
          <td>{% if row.website%}<a href="{{row.website}}">{{ row.website }}{%endif%}</a></td>
          <td>{% if row.librarian%}{{ row.librarian }}{%endif%}</td>
          <td>{% if row.hours%}{{ row.hours }}{%endif%}</td>


          <td>
            <form action="{{url_for('active_inactivelib')}}" method="POST">
              {{ form.csrf_token }}
              <input type="hidden" name="id" value="{{row.id}}" id="id">
            <div class="btn-group" role="group" aria-label="Basic mixed styles example">
             
              <a href="{{url_for('add_library',id=row.id)}}">
                <button type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit Library"
                  class="btn btn-outline-primary btn-sm">

                  <i class="bi bi-pencil-square"></i>
                </button></a>

                {% if row.activestate == True %}
                <button type="submit" name="status" value="public" class="btn btn-outline-danger btn-sm" data-bs-toggle="tooltip"
                  data-bs-placement="right" title="Make Private">
                  <i class="bi bi-eye"></i>
                </button>
                {%else%}
                <button type="submit" name="status" value="private" class="btn btn-outline-success btn-sm"
                  data-bs-toggle="tooltip" data-bs-placement="right" title="Make Public">
                  <i class="bi bi-eye-slash"></i>
                </button>
                {%endif%}
                {% if current_user.username=='nirat' %}
                <a href="{{url_for('librarydelete',id=row.id)}}"
                onclick="return confirm('Are you sure you want to delete this Library?')"><button type="button"
                  class="btn btn-outline-danger btn-sm" data-bs-toggle="tooltip" data-bs-placement="right"
                  title="Delete Library">
                  <i class="bi bi-trash3-fill"></i>
                </button></a>
                {%endif%}
              
            </div>
          </form>
            </p>
          </td>
        





          </td>
        </tr>
      
        {% endfor %}
      </tbody>
    </table>


  </div>


  <div class="col col-lg-2 linkfnt shadow p-3 mb-5 bg-body rounded">

    <strong>
      {% if id %}
      Edit
            {%else%}
      Add
      {%endif%}
      Library

    </strong>

    {% if img%}

    <img src="{{ url_for('static',filename='images/library/'+  img) }}" width="150em" class="rounded mx-auto d-block"
      title="{{form.libraryname.data}}">
    {%endif%}

    <form action="" method="POST" enctype="multipart/form-data">
      {{ form.csrf_token }}
      <input type="hidden" name="id" value="{{id}}" id="id">
      <div class="mb-2">

      </div>
      <div class="mb-2">
        <label for="exampleInputPassword1" class="form-label">{{form.libraryname.label}}</label>
        {{form.libraryname(class="form-control form-control-sm")}}

        <label for="exampleInputPassword1" class="form-label">{{form.address.label}}</label>
        {{form.address(class="form-control form-control-sm",rows='6')}}
        <label for="exampleInputPassword1" class="form-label">{{form.contact.label}}</label>
        {{form.contact(class="form-control form-control-sm")}}
        <label for="exampleInputPassword1" class="form-label">{{form.librarian.label}}</label>
        {{form.librarian(class="form-control form-control-sm")}}
        <label for="exampleInputPassword1" class="form-label">{{form.image.label}}</label>
        {{form.image(class="form-control form-control-sm")}}
        <label for="exampleInputPassword1" class="form-label">{{form.map_coordinates.label}}</label>
        {{form.map_coordinates(class="form-control form-control-sm")}}
        <label for="exampleInputPassword1" class="form-label">{{form.gmaps_url.label}}</label>
        {{form.gmaps_url(class="form-control form-control-sm")}}
        {{ form.email.label(class='form-control-label') }}
        {% if form.email.errors %}
        {{ form.email(class='form-control form-control-sm is-invalid')}}
        {% for error in form.email.errors %}
        <span>{{error}}</span>
        {%endfor%}
        {%else%}
        {{ form.email(class='form-control form-control-sm') }}
        {% endif %}
        <label for="exampleInputPassword1" class="form-label">{{form.website.label}}</label>
        {{form.website(class="form-control form-control-sm")}}
        <label for="exampleInputPassword1" class="form-label">{{form.hours.label}}</label>
        {{form.hours(class="form-control form-control-sm")}}
        
      </div>
      <!-- {{form.submit(class="btn btn-primary btn-sm")}} -->
      {% if id %}
      {{form.submit(class="btn btn-primary btn-sm",value='Save')}}
      {%else%}
      {{form.submit(class="btn btn-primary btn-sm")}}
       {%endif%}
    </form>



  </div>

</div>

{% endblock %}