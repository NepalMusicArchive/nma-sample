{% extends 'layouts.html' %}
{% set active_page = "resume" %}

{% block content %}

<div class="row">

  <div class=" shadow p-3 mb-5 bg-body rounded">

    <form method="POST" enctype="multipart/form-data">
      {{ form.csrf_token }}
      <div class="col-12">
        <div class="input-group mb-3 linkfnt">
          <span class="input-group-text linkfnt" id="basic-addon1">{{form.contributor.label}}</span>
          <select class="form-select form-select-sm linkfnt" name="{{ form.contributor.name }}"
            id="{{ form.contributor.id }}">
            {% for value, label in form.contributor.choices %}
            <option value="{{ value }}" {% if value==form.contributor.default %} selected {% endif %}> {{ label }}
            </option>
            {% endfor %}
          </select>

        </div>

        <p>
        <div class="form-group row linkfnt">
          <div class="col-sm-6">
            <div class="input-group mb-2 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.media_name.label}}</span>

              <select class="form-select form-select-sm linkfnt" name="{{ form.media_name.name }}"
                id="{{ form.media_name.id }}">
                {% for value, label in form.media_name.choices %}
                <option value="{{ value }}" {% if value==form.media_name.default %} selected {% endif %}> {{ label }}
                </option>
                {% endfor %}
              </select>
            </div>

          </div>
          <div class="col-sm-6">
            <div class="input-group mb-2 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.format_name.label}}</span>
              <select class="form-select form-select-sm linkfnt" name="{{ form.format_name.name }}"
                id="{{ form.format_name.id }}">
                {% for value, label in form.format_name.choices %}
                <option value="{{ value }}" {% if value==form.format_name.default %} selected {% endif %}> {{ label }}
                </option>
                {% endfor %}
              </select>
            </div>
          </div>

        </div>
        </p>

        <p>
        <div class="form-group row linkfnt">
          <div class="col-sm-6">
            <div class="input-group mb-2 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.artist.label}}</span>
              {{form.artist(class='input-group form-control linkfnt')}}
            </div>

          </div>
          <div class="col-sm-6">
            <div class="input-group mb-3 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.company.label}}</span>
              <select class="form-select form-select-sm linkfnt" name="{{ form.company.name }}"
                id="{{ form.company.id }}">
                {% for value, label in form.company.choices %}
                <option value="{{ value }}" {% if value==form.company.default %} selected {% endif %}> {{ label }}
                </option>
                {% endfor %}
              </select>
            </div>
          </div>
        </div>

        </p>
        <p>
        <div class="form-group row linkfnt">
          <div class="col-sm-6">
            <div class="input-group mb-2 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.collection_title.label}}</span>
              {{form.collection_title(class='input-group form-control
              linkfnt',placeholder=form.collection_title.description)}}
            </div>

          </div>
          <div class="col-sm-6">
            <div class="input-group mb-3 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.image.label}}</span>
              {{form.image(class='form-control linkfnt')}}
            </div>
          </div>
        </div>
        </p>

        <p>
        <div class="form-group row linkfnt">
          <div class="col-sm-4">
            <div class="input-group mb-2 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.release_month.label}}</span>
              {{form.release_month(class='form-select form-select-sm linkfnt')}}
            </div>

          </div>
          <div class="col-sm-4">
            <div class="input-group mb-2 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.release_date.label}}</span>
              {{form.release_date(class='form-select form-select-sm linkfnt')}}
            </div>

          </div>
          <div class="col-sm-4">
            <div class="input-group mb-3 linkfnt">
              <span class="input-group-text linkfnt" id="basic-addon1">{{form.release_year.label}}</span>
              {{form.release_year(class='form-select form-select-sm linkfnt')}}
            </div>
          </div>
        </div>
        </p>
        <div class="input-group mb-2 linkfnt">
          <span class="input-group-text linkfnt">{{form.inscriptions.label}}</span>
          {{form.inscriptions(rows='5',class='form-control form-control-sm linkfnt')}}
        </div>
        <br>
        <div class="input-group mb-2 linkfnt">
          <span class="input-group-text linkfnt" id="basic-addon1">{{form.keywords.label}}</span>

          {{form.keywords(rows='5',class='form-control form-control-sm linkfnt')}}
        </div>

        <div class="input-group  mb-3 linkfnt">
          <span class="input-group-text linkfnt">{{form.notes.label}}</span>
          {{form.notes(rows='5',class='form-control linkfnt')}}
        </div>
        <br>

        {{form.submit(class='btn btn-primary linkfnt')}}
        &nbsp; &nbsp; &nbsp; &nbsp;
        <a href="{{url_for('assets')}}">
          <button type="button" class="btn btn-outline-info btn-sm">Change Options</button></a>


      </div>

    </form>

  </div>

</div>
<p class="card-text" style="float: right">
  <a class="btn btn-outline-secondary btn-sm" href="{{request.referrer}}">Go back</a>
</p>
</div>
<script>
  var media_name_select = document.getElementById("media_name");
  var format_mame_select = document.getElementById("format_name");

  media_name_select.onchange = function () {

    media = media_name_select.value;


    fetch('/format/' + media).then(function (response) {
      <!-- alert("test .. " + media); -->

      response.json().then(function (data) {
        var optionHTML = '';

        for (var format_mame_select of data.format_list) {
          optionHTML += '<option value="' + format_mame_select.id + '">' + format_mame_select.name + '</option>';
        }

        format_name.innerHTML = optionHTML;
      })

    });
  }
</script>
{% endblock %}